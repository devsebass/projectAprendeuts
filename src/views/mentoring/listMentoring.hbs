<style>
    .custom-accordion .accordion-item {
        background-color: #FAFAFA;
        border-radius: 5px;
    }

    .accordion-flush .accordion-item .accordion-button,
    .accordion-flush .accordion-item .accordion-button.collapsed {
        border-radius: 5px;
    }

    .custom-accordion .accordion-button {
        color: #616161;
        background: #FAFAFA;
        font-weight: bold;
        border-radius: 5px;
    }

    .custom-accordion .accordion-button:hover {
        color: #B5BF00;
    }

    .accordion-flush .accordion-button:focus {
        box-shadow: none;
    }

    .custom-accordion .accordion-button:not(.collapsed) {
        color: #FAFAFA;
        background-color: #B5BF00;
        border-radius: 5px 5px 0 0;
    }

    .accordion-button:not(.collapsed)::after {
        background-image: var(--bs-accordion-btn-icon);
    }

    .custom-focus-color:focus {
        border-color: #D5D5D5;
        box-shadow: 0 0 5px #F4F4F4;
        color: #616161;
        outline: 0;
        background: #F4F4F4;
    }

    .custom-color {
        color: #616161;
        background: #F4F4F4;
    }

    .custom-hover-color:hover {
        background: #B5BF00;
        color: #FAFAFA;
    }

    .custom-placeholder-color::placeholder {
        color: #b0b0b0;
    }

    .btn-close:active {
        box-shadow: 0px 0px 0px 3px #B5BF00;
    }

    .btn-close:focus {
        box-shadow: 0px 0px 0px 3px #B5BF00;
    }
</style>

<body class="sb-nav-fixed">
    <div class="loader-container">
        <div class="loader"></div>
    </div>
    <nav class="sb-topnav navbar navbar-expand" id="sb-topnav-expand">
        <div class="navbar-brand ps-3" id="navbar-brand">
            <img src="/img/Logo.svg" width="90px" height="46px" id="nav-img">
        </div>
        <button class="btn btn-link d-md-inline-block me-0" id="sidebarToggle" style="color: #FAFAFA;">
            <i class="fas fa-lg fa-bars"></i>
        </button>
        <h5 id="titleh5">Listado de tutorías agendadas</h5>
        <div class="d-none d-md-inline-block ms-auto me-0">
            <img src="/uploads/{{imageUser}}" width="35px">
        </div>
        <h5 class="mx-3" id="titleh5a">{{nameUser}} {{lastnameUser}}</h5>
    </nav>
    <div id="layoutSidenav">
        <div id="layoutSidenav_nav">
            <nav class="sb-sidenav accordion" id="sidenavAccordion">
                <div class="sb-sidenav-menu">
                    <div class="nav">
                        <div class="sb-sidenav-footer1">
                            <a href="/student/mentoring" class="nav-link" id="nav-l">
                                <div class="sb-nav-link-icon">
                                    <img src="/img/Reloj.svg" width="25px">
                                </div>
                                Agendar tutoría
                            </a>
                        </div>
                        <a href="/student/home" class="nav-link" id="nav-l-info2">
                            <div class="sb-nav-link-icon">
                                <img src="/img/Dashboard.svg" width="25px">
                            </div>
                            Dashboard
                        </a>
                        <div class="nav-link collapsed" id="nav-l-info1" data-bs-toggle="collapse"
                            data-bs-target="#collapseLayouts" aria-expanded="false" aria-controls="collapseLayouts">
                            <div class="sb-nav-link-icon">
                                <img src="/img/Tuto.svg" width="25px">
                            </div>
                            Tutorías
                            <div class="sb-sidenav-collapse-arrow">
                                <i class="fas fa-angle-down"></i>
                            </div>
                        </div>
                        <div class="collapse" id="collapseLayouts" aria-labelledby="headingOne"
                            data-bs-parent="#sidenavAccordion">
                            <nav class="sb-sidenav-menu-nested nav">
                                {{#if mentorings}}
                                {{#each mentorings}}
                                <div class="nav-link" id="text2">Tutoria del {{formatDate date}}</div>
                                {{/each}}
                                {{else}}
                                <p id="text2">No has agendado ninguna tutoría por ahora.</p>
                                {{/if}}
                            </nav>
                        </div>
                        <div class="nav-link collapsed" id="nav-l-info2" data-bs-toggle="collapse"
                            data-bs-target="#collapseLayouts2" aria-expanded="false" aria-controls="collapseLayouts">
                            <div class="sb-nav-link-icon">
                                <img src="/img/User.svg" width="25px">
                            </div>
                            Cuenta
                            <div class="sb-sidenav-collapse-arrow">
                                <i class="fas fa-angle-down"></i>
                            </div>
                        </div>
                        <div class="collapse" id="collapseLayouts2" aria-labelledby="headingOne"
                            data-bs-parent="#sidenavAccordion">
                            <nav class="sb-sidenav-menu-nested nav">
                                <a href="/student/data" class="nav-link" id="text1">Mis datos</a>
                                <a href="/student/logout" class="nav-link" id="text1">Cerrar sesión</a>
                            </nav>
                        </div>
                    </div>
                </div>
                <div class="sb-sidenav-footer">
                    <span class="fw-bold">Developed by: </span>devsebass
                </div>
            </nav>
        </div>
        <div id="layoutSidenav_content">
            <div class="m-5">
                {{#if mentorings}}
                <div class="accordion accordion-flush custom-accordion" id="accordionFlushExample">
                    {{#each mentorings}}
                    <div class="accordion-item mb-3" id="cont-accordion">
                        <h2 class="accordion-header" id="flush-headingOne">
                            <button class="accordion-button collapsed" type="button" id="botonAcordeon"
                                data-bs-toggle="collapse" data-bs-target="#flush-collapse{{id}}" aria-expanded="false"
                                aria-controls="flush-collapseOne"><span id="spang">Tutoría del {{formatDate
                                    date}}</span>
                            </button>
                        </h2>
                        <div id="flush-collapse{{id}}" class="accordion-collapse collapse"
                            aria-labelledby="flush-headingOne" data-bs-parent="#accordionFlushExample">
                            <div class="accordion-body">
                                <div class="mx-3">
                                    <div class="row">
                                        <div class="col-7">
                                            <form action="" method="post" id="miFormulario">
                                                <div class="row">
                                                    <div class="col-6">
                                                        <div class="form-group mb-2">
                                                            <div class="row">
                                                                <div class="mb-2">
                                                                    <label for="materiaInput" class="fw-bold"
                                                                        id="title6b">Materia:</label>
                                                                </div>
                                                                <div class=" col-11">
                                                                    <input type="text"
                                                                        class="form-control custom-focus-color"
                                                                        value="{{subject}}" id="inputval" readonly>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group mb-2">
                                                            <div class="row">
                                                                <div class="mb-2">
                                                                    <label for="profInput" class="fw-bold"
                                                                        id="title6b">Docente:</label>
                                                                </div>
                                                                <div class="col-11 mb-2">
                                                                    <input type="text"
                                                                        class="form-control custom-focus-color"
                                                                        value="{{teacherName}} {{teacherLastname}}"
                                                                        id="inputval" readonly>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group mb-2">
                                                            <div class="row">
                                                                <div class="mb-2">
                                                                    <label for="modalidadInput" class="fw-bold"
                                                                        id="title6b">Modalidad:</label>
                                                                </div>
                                                                <div class="col-11">
                                                                    <input type="text"
                                                                        class="form-control custom-focus-color"
                                                                        value="{{modality}}" id="inputval" readonly>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group mb-3">
                                                            <div class="row">
                                                                <div class="mb-2">
                                                                    <label for="tipoInput1" class="fw-bold"
                                                                        id="title6b">Tipo:</label>
                                                                </div>
                                                                <div class="col-11">
                                                                    <input type="text"
                                                                        class="form-control custom-focus-color"
                                                                        value="{{type}}" id="inputval" readonly>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-6">
                                                        <div class="form-group mb-2">
                                                            <div class="row">
                                                                <div class="mb-2">
                                                                    <label for="fechaInput" class="fw-bold"
                                                                        id="title6b">Fecha:</label>
                                                                </div>
                                                                <div class="col-11">
                                                                    <input type="text"
                                                                        class="form-control custom-focus-color"
                                                                        id="inputval" value="{{formatDate date}}"
                                                                        readonly>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group mb-3">
                                                            <div class="row">
                                                                <div class="mb-2">
                                                                    <label for="horaInput" class="fw-bold"
                                                                        id="title6b">Hora:</label>
                                                                </div>
                                                                <div class="col-11">
                                                                    <input type="text"
                                                                        class="form-control custom-focus-color"
                                                                        id="inputval" value="{{time}}" readonly>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group mb-3">
                                                            <div class="row">
                                                                <div class="mb-1">
                                                                    <label for="tipoInput" class="fw-bold"
                                                                        id="title6b">Lugar:</label>
                                                                </div>
                                                                <div class="col-11">
                                                                    <input type="text"
                                                                        class="form-control custom-focus-color"
                                                                        id="inputval" value="{{location}}" readonly>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        {{#unless hasRated}}
                                                        <div class="form-group mt-5">
                                                            <div class="sb-sidenav-footer4b" data-bs-toggle="modal"
                                                                data-bs-target="#exampleModal{{id}}">¿Quieres calificar
                                                                al docente?</div>
                                                        </div>
                                                        {{else}}
                                                        <div class="form-group mt-5"></div>
                                                        {{/unless}}
                                                    </div>
                                                </div>
                                                <div class="modal fade" id="exampleModal{{id}}" tabindex="-1"
                                                    aria-labelledby="exampleModalLabel" aria-hidden="true"
                                                    data-bs-backdrop="static">
                                                    <div class="modal-dialog">
                                                        <div class="modal-content" style="background: #fafafa;">
                                                            <div class="row">
                                                                <div class="col-10 p-0"
                                                                    style="margin-top: 10px; margin-left: 28px;">
                                                                    <h5 style="color:#B5BF00;">Calificación del docente
                                                                    </h5>
                                                                </div>
                                                                <div class="col-1">
                                                                    <button type="button" class="btn-close"
                                                                        data-bs-dismiss="modal"
                                                                        style="margin-top: 10px; margin-left: 5px;"></button>
                                                                </div>
                                                            </div>
                                                            <div class="modal-body pt-2">
                                                                <div class="form-group">
                                                                    <div class="row">
                                                                        <div class="col-1"
                                                                            style="font-weight: bold; color: #616161">
                                                                            <label for="teacherId"
                                                                                id="letter">Docente:</label>
                                                                        </div>
                                                                        <div class="col-5 mx-4">
                                                                            <p style="color: #616161;">{{teacherName}}
                                                                                {{teacherLastname}}</p>
                                                                            <input type="text" name="teacherId"
                                                                                value="{{teacherId}}" hidden>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group mb-3">
                                                                    <div class="row">
                                                                        <div class="col-1"
                                                                            style="font-weight: bold; color: #616161; margin-right: 55px; margin-top: 5px">
                                                                            <label for="rating"
                                                                                id="letter">Calificación:</label>
                                                                        </div>
                                                                        <div class="col-6">
                                                                            <div class="rating">
                                                                                <label>
                                                                                    <input type="radio" name="rating"
                                                                                        value="1" required />
                                                                                    <span class="icon">★</span>
                                                                                </label>
                                                                                <label>
                                                                                    <input type="radio" name="rating"
                                                                                        value="2" required />
                                                                                    <span class="icon">★</span>
                                                                                    <span class="icon">★</span>
                                                                                </label>
                                                                                <label>
                                                                                    <input type="radio" name="rating"
                                                                                        value="3" required />
                                                                                    <span class="icon">★</span>
                                                                                    <span class="icon">★</span>
                                                                                    <span class="icon">★</span>
                                                                                </label>
                                                                                <label>
                                                                                    <input type="radio" name="rating"
                                                                                        value="4" required />
                                                                                    <span class="icon">★</span>
                                                                                    <span class="icon">★</span>
                                                                                    <span class="icon">★</span>
                                                                                    <span class="icon">★</span>
                                                                                </label>
                                                                                <label>
                                                                                    <input type="radio" name="rating"
                                                                                        value="5" required />
                                                                                    <span class="icon">★</span>
                                                                                    <span class="icon">★</span>
                                                                                    <span class="icon">★</span>
                                                                                    <span class="icon">★</span>
                                                                                    <span class="icon">★</span>
                                                                                </label>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="mb-3">
                                                                    <label for="comment" id="letter"
                                                                        class="form-label fw-bold">Comentario <span
                                                                            id="spang3">(Opcional)</span>:</label>
                                                                    <textarea
                                                                        class="form-control custom-color custom-focus-color"
                                                                        id="comment" name="comment" rows="3"></textarea>
                                                                </div>
                                                            </div>
                                                            <div class="d-flex justify-content-center mb-3">
                                                                <button type="submit"
                                                                    class="sb-sidenav-footer6d">Guardar</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                        <div class="col-5 mt-2 px-0">
                                            <img src="/img/calendar.svg" width="450px">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    {{/each}}
                </div>
                {{else}}
                <div style="margin-top: 60px;">
                    <div class="row">
                        <div class="col-12 d-flex justify-content-center">
                            <img src="/img/notify.svg" width="600px">
                        </div>
                        <div class="col-12 d-flex justify-content-center mt-3">
                            <h3 id="titleh4">No tienes ninguna tutoría agendada</h3>
                        </div>
                    </div>
                </div>
                {{/if}}
            </div>

            <div class="toast-container position-fixed bottom-0 end-0 p-3">
                <div id="myToastWarning" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
                    <div class="toast-header">
                        <img src="/img/warning.svg" class="rounded me-2" width="20px">
                        <strong class="me-auto">Tutorías - Aprende+</strong>
                        <small class="text-muted">Ahora mismo</small>
                        <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
                    </div>
                    <div class="toast-body">
                        {{#if warning}}
                        {{warning}}
                        {{/if}}
                    </div>
                </div>
            </div>

            <div class="toast-container position-fixed bottom-0 end-0 p-3">
                <div id="myToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
                    <div class="toast-header">
                        <img src="/img/checkg.svg" class="rounded me-2" width="20px">
                        <strong class="me-auto">Tutorías - Aprende+</strong>
                        <small class="text-muted">Ahora mismo</small>
                        <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
                    </div>
                    <div class="toast-body">
                        {{#if success}}
                        {{success}}
                        {{/if}}
                    </div>
                </div>
            </div>

        </div>
    </div>
</body>

<script>
    const urlParams = new URLSearchParams(window.location.search);
    const id = urlParams.get('id');
    if (id) {
        $(`#${id}`).addClass('show');
    }

    $(document).ready(function () {
        if ('{{success}}') {
            $('#myToast').toast('show');
        }

        if ('{{warning}}') {
            $('#myToastWarning').toast('show');
        }
    });

    window.addEventListener("DOMContentLoaded", (event) => {
        const sidebarToggle = document.body.querySelector("#sidebarToggle");
        if (sidebarToggle) {
            sidebarToggle.addEventListener("click", (event) => {
                event.preventDefault();
                document.body.classList.toggle("sb-sidenav-toggled");
                localStorage.setItem("sb|sidebar-toggle", document.body.classList.contains("sb-sidenav-toggled")
                );
            });
        }
    });

    document.addEventListener('DOMContentLoaded', function () {
        setTimeout(() => {
            document.querySelector('.loader-container').style.display = 'none';
            document.querySelector('.layoutSidenav').style.display = 'block';
        }, 700);
    })

</script>